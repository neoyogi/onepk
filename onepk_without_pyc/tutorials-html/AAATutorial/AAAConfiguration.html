<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
 | Generated by Apache Maven Doxia at Aug 18, 2014
 | Rendered using Apache Maven Fluido Skin 1.2.2
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>onePK Python Tutorials - AAA Configuration - Configuring the Network Element for AAA</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido.min.js"></script>

    
    <meta http-equiv="Content-Language" content="en" />
            </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>onePK Python Tutorials</h2>
                </div>
                      </div>
        <div class="pull-right">                  <a href="http://www.cisco.com/go/onepk" id="bannerRight">
                                                                                                <img src="../images/cisco-logo.png" />
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
            
                  <li id="publishDate">Last Published: 2014-08-18</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 1.3.0.181</li>
                      
                
            
      
                            </ul>
      </div>

            <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
            
                                    <h3>Main</h3>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Home">Home</a>
            </li>
          </ul>
                        <h3>Tutorials</h3>
                  <ul>
                  <li class="none">
                          <a href=".././basetutorial.html" title="Connecting to a Network Element">Connecting to a Network Element</a>
            </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li class="expanded">
                          <a href="../index.html#Base_Service_Set_Tutorials" title="Base Service Set Tutorials">Base Service Set Tutorials</a>
                    <ul>
                                                                        <li class="collapsed">
                          <a href="../SessionTutorial/SessionTutorials.html" title="Session Handling">Session Handling</a>
                  </li>
                                                                                                            <li class="collapsed">
                          <a href="../NetworkElement/networkelement.html" title="Element">Element</a>
                  </li>
                                                                                                                                                <li class="collapsed">
                          <a href="../NetworkInterface/networkinterface.html" title="Network Interface">Network Interface</a>
                  </li>
                                                                                                                                                                  <li class="collapsed">
                          <a href="../Events/events.html" title="Events">Events</a>
                  </li>
                                                                                          <li class="collapsed">
                          <a href="../Discovery/discovery.html" title="Discovery">Discovery</a>
                  </li>
                                                                                          <li class="collapsed">
                          <a href="../Management/management.html" title="Application CLI Extension">Application CLI Extension</a>
                  </li>
                                                                                                    <li class="expanded">
                          <a href="../AAATutorial/AAAOverview.html" title="AAA">AAA</a>
                    <ul>
                      <li class="none">
            <strong>AAA Configuration</strong>
          </li>
                      <li class="none">
                          <a href="../AAATutorial/AAATutorial.html" title="AAA Tutorial">AAA Tutorial</a>
            </li>
              </ul>
        </li>
                                                                        <li class="collapsed">
                          <a href="../VTYTutorial/vty.html" title="VTY">VTY</a>
                  </li>
                                                                                          <li class="collapsed">
                          <a href="../Policy/policy.html" title="Policy">Policy</a>
                  </li>
                                                                                          <li class="collapsed">
                          <a href="../Routing/routing.html" title="Routing">Routing</a>
                  </li>
                                                                        <li class="collapsed">
                          <a href="../Location/location.html" title="Location">Location</a>
                  </li>
                                                                        <li class="collapsed">
                          <a href="../Identity/identity.html" title="Identity">Identity</a>
                  </li>
              </ul>
        </li>
          </ul>
                      
            
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
        <div id="bodyColumn"  class="span10" >
                                  
            <div class="section"><h2><a name="AAA_Configuration_Tutorial">AAA Configuration Tutorial</a></h2>
<p><a href="https://communities.cisco.com/community/developer/networking/cisco-one/onepk" class="externalLink">For questions, read the onePK Forums</a></p>
<p><b>Contents</b></p>
<ul><li><a href="#AAA_Configuration_Tutorial">AAA Configuration Tutorial</a></li>
<li><a href="#Goal">Goal</a></li>
<li><a href="#RequirementsPrerequisites">Requirements/Prerequisites</a></li>
<li><a href="#Steps_In_Detail">Steps In Detail</a><ul><li><a href="#Configuring_FreeRADIUS">Configuring FreeRADIUS</a></li>
<li><a href="#Configuring_IOS">Configuring IOS</a></li>
<li><a href="#Configuring_NX-OS">Configuring NX-OS</a></li>
</ul>
</li>
<li><a href="#Result">Result</a></li>
<li><a href="#Next_Steps">Next Steps</a></li>
</ul>
</div>
<div class="section"><h2><a name="Goal">Goal</a></h2>
<p>This tutorial demonstrates the pre-configuration needed for the <a href="./AAATutorial.html">AAA Tutorial</a>.</p>
<p>The following examples will use FreeRADIUS as the AAA server and will configure IOS or NX-OS. Your configuration may vary depending on the platform and AAA server you are using.</p>
<p>The <a href="http://www.freeradius.org" class="externalLink">FreeRADIUS</a> AAA server is a daemon that enables you to set up a radius protocol server, which can be used for Authentication, Authorization, and Accounting various types of network access. To connect to the server, you need to set up a network device that will talk to it. Configure your network operating system (NOS) by following the step <a href="#Configuring_IOS">Configuring IOS</a> or <a href="#Configuring_NX-OS">Configuring NX-OS</a> below. For more information, see <a href="http://www.freeradius.org" class="externalLink">www.freeradius.org</a>. FreeRADIUS is an open-source software project.</p>
</div>
<div class="section"><h2><a name="RequirementsPrerequisites">Requirements/Prerequisites</a></h2>
<p>These steps assume that you have a network element running IOS and a FreeRADIUS server that is accessible by the network element.</p>
</div>
<div class="section"><h2><a name="Steps_In_Detail">Steps In Detail</a></h2>
<div class="section"><h3><a name="Configuring_FreeRADIUS">Configuring FreeRADIUS</a></h3>
<p>Create a user in the &quot;users&quot; configuration file. This will be the username and password used to connect to the network element. Here we will use user1/pass1.</p>
<div class="source"><pre class="prettyprint">user1   Cleartext-Password := &quot;pass1&quot;
        Cisco-AVPair += &quot;priv-lvl=15&quot;,</pre>
</div>
<p>To enable auto-accounting for a user, append the following:</p>
<div class="source"><pre class="prettyprint">        Cisco-AVPair += &quot;auto-acct=enable&quot;,</pre>
</div>
<p>To authorize a user to use a specific onePK application, add a Cisco-AVPair of the type &quot;allowed-app=&lt;app-name&gt;&quot;. The app-name is the unique name given to a onePK application. For the AAA Tutorial, append the following to user1's configuration:</p>
<div class="source"><pre class="prettyprint">        Cisco-AVPair += &quot;allowed-app=com.cisco.onep.tutorials.aaa.AAATutorial&quot;,</pre>
</div>
<p>In additional to the enumerated AAA attributes, the onePK AAA client recognizes app-specific attributes &quot;allowed-action=&lt;app-name&gt;:&lt;action&gt;&quot; and &quot;app-attr=&lt;app-attr-name&gt;:&lt;type&gt;:&lt;app-attr-value&gt;&quot;. For the AAA Tutorial, append the following to user1's configuration:</p>
<div class="source"><pre class="prettyprint">        Cisco-AVPair += &quot;allowed-action=com.cisco.onep.tutorials.aaa.AAATutorial:walk&quot;,
        Cisco-AVPair += &quot;allowed-action=com.cisco.onep.tutorials.aaa.AAATutorial:run&quot;,
        Cisco-AVPair += &quot;allowed-action=com.cisco.onep.tutorials.aaa.AAATutorial:custom&quot;,
        Cisco-AVPair += &quot;app-attr=aaa-tutorial-custom:string:jump&quot;</pre>
</div>
<p>The full user configuration for the AAA Tutorial is as follows:</p>
<div class="source"><pre class="prettyprint">user1   Cleartext-Password := &quot;pass1&quot;
        Cisco-AVPair += &quot;priv-lvl=15&quot;,
        Cisco-AVPair += &quot;auto-acct=enable&quot;,
        Cisco-AVPair += &quot;allowed-app=com.cisco.onep.tutorials.aaa.AAATutorial&quot;,
        Cisco-AVPair += &quot;allowed-action=com.cisco.onep.tutorials.aaa.AAATutorial:walk&quot;,
        Cisco-AVPair += &quot;allowed-action=com.cisco.onep.tutorials.aaa.AAATutorial:run&quot;,
        Cisco-AVPair += &quot;allowed-action=com.cisco.onep.tutorials.aaa.AAATutorial:custom&quot;,
        Cisco-AVPair += &quot;app-attr=aaa-tutorial-custom:string:jump&quot;</pre>
</div>
</div>
<div class="section"><h3><a name="Configuring_IOS">Configuring IOS</a></h3>
<p>If you are connecting to a network element that runs IOS, you must configure the network element to obtain its AAA attributes from the AAA server. The following steps show how this is done from the IOS command line interface.</p>
<div class="source"><pre class="prettyprint">IOS&gt;enable
IOS#configure terminal
IOS(config)#aaa new-model
IOS(config)#radius server &lt;alias-of-radius-server&gt;
IOS(config-radius-server)#address &lt;ipv4|ipv6&gt; &lt;address-of-radius-server&gt; [auth-port &lt;port-#&gt;] [acct-port &lt;port-#&gt;]
IOS(config-radius-server)#key &lt;pre-shared-key&gt;
IOS(config-radius-server)#exit
IOS(config)#aaa authentication onep default group radius
IOS(config)#aaa authorization onep default group radius
IOS(config)#aaa accounting onep default &lt;accounting-mode&gt; [group radius]
IOS(config)#end</pre>
</div>
</div>
<div class="section"><h3><a name="Configuring_NX-OS">Configuring NX-OS</a></h3>
<p>If you are connecting to a network element that runs NX-OS, you must configure the network element to obtain its AAA attributes from the AAA server. The following steps show how this is done from the NX-OS command line interface.</p>
<div class="source"><pre class="prettyprint">NX-OS#configure terminal
NX-OS(config)#radius distribute
NX-OS(config)#radius-server host &lt;ip-of-radius-server&gt; [key &lt;pre-shared-key&gt;]
NX-OS(config)#radius commit
NX-OS(config)#aaa group server radius &lt;name-the-server-group&gt;
NX-OS(config-radius)#server &lt;ip-of-radius-server&gt;
NX-OS(config-radius)#use-vrf &lt;vrf-to-use&gt;
NX-OS(config-radius)#source-interface &lt;source-interface-to-use&gt;
NX-OS(config-radius)#exit
NX-OS(config)#aaa authentication onep default group &lt;name-of-server-group&gt;
NX-OS(config)#aaa accounting onep default group &lt;name-of-server-group&gt;
NX-OS(config)#end</pre>
</div>
</div>
</div>
<div class="section"><h2><a name="Result">Result</a></h2>
<p>Congratulations! You have configured a network element and a AAA server and are now ready to run the <a href="./AAATutorial.html">AAA Tutorial</a>.</p>
</div>
<div class="section"><h2><a name="Next_Steps">Next Steps</a></h2>
<ul><li><a href="../Discovery/discovery.html">Discovery</a> </li>
<li><a href="../NetworkInterface/networkinterface.html">Network Interface</a></li>
<li><a href="../SessionTutorial/SessionTutorials.html">Session Handling</a> </li>
<li><a href="../Policy/policy.html">Policy</a></li>
<li><a href="../Routing/routing.html">Routing</a></li>
<li><a href="../VTYTutorial/vty.html">VTY</a></li>
</ul>
</div>

                  </div>
            </div>
      
    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2014.
          All Rights Reserved.      
            
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
